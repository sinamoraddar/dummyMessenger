(this.webpackJsonpdummymessenger=this.webpackJsonpdummymessenger||[]).push([[0],{10:function(e,t,a){e.exports={sideBarItem:"SideBarItem_sideBarItem__8vHkz",isCurrentPage__closed:"SideBarItem_isCurrentPage__closed__p9jAj",isCurrentPage__opened:"SideBarItem_isCurrentPage__opened__-OSEn",icon:"SideBarItem_icon__1r1Ev",icon__opened:"SideBarItem_icon__opened__2L7v0",isOpen:"SideBarItem_isOpen__1Miil"}},15:function(e,t,a){e.exports={searchInput:"ChatList_searchInput__1M19z",chatList:"ChatList_chatList__kTfDG",chatItemContainer:"ChatList_chatItemContainer__2ml_5",isCurrentMessengerView:"ChatList_isCurrentMessengerView__iAydA",isNotCurrentMessengerView:"ChatList_isNotCurrentMessengerView__2vkQe"}},16:function(e,t,a){e.exports={sideBar:"SideBar_sideBar__2fwcD",slideToLeft:"SideBar_slideToLeft__1buZe",toggleButton:"SideBar_toggleButton__R80kF",isOpen:"SideBar_isOpen__1on_M",isCurrentView:"SideBar_isCurrentView__ukDSV",isNotCurrentView:"SideBar_isNotCurrentView__9eiwq"}},20:function(e,t,a){e.exports={dashboard:"DashBoard_dashboard__2cfRe",slideToRight:"DashBoard_slideToRight__17lqP",isCurrentView:"DashBoard_isCurrentView__2dSL_",isNotCurrentView:"DashBoard_isNotCurrentView__14wUC"}},21:function(e,t,a){e.exports={chatItem:"ChatItem_chatItem__2BkCU",text:"ChatItem_text__3hYlu",isActive:"ChatItem_isActive__24FgT"}},24:function(e,t,a){e.exports={tabBarItem:"TabBarItem_tabBarItem__1MbIU",isCurrentTab:"TabBarItem_isCurrentTab__FU3-b",fillBar:"TabBarItem_fillBar__1ZT9V"}},27:function(e,t,a){e.exports={toggleSideBar:"ToggleSideBarButton_toggleSideBar__14AcP",black:"ToggleSideBarButton_black__2kqEb"}},34:function(e,t,a){e.exports={tabBar:"TabBar_tabBar__ollAj"}},35:function(e,t,a){e.exports={messenger:"Messenger_messenger__1tXXf"}},39:function(e,t,a){e.exports={avatar:"Avatar_avatar__2LfzW"}},4:function(e,t,a){e.exports={container:"MessageItem_container__3z8nV",message:"MessageItem_message__1hngD",profilePicture:"MessageItem_profilePicture__1G55h","message--user":"MessageItem_message--user__pCx89","appearAnimation--Left":"MessageItem_appearAnimation--Left__JAvGz","message--friend":"MessageItem_message--friend__-Yjma","appearAnimation--Right":"MessageItem_appearAnimation--Right__ID3-M",deleteButton:"MessageItem_deleteButton__2S5dC","deleteButton--right":"MessageItem_deleteButton--right__1Qwnf","time--user":"MessageItem_time--user__U18Oy","time--friend":"MessageItem_time--friend__7XEL8",left:"MessageItem_left__1Zogv",right:"MessageItem_right__281NC"}},41:function(e,t,a){e.exports=a(58)},57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c),i=a(3),o=a(11),l=a(9),u=a(20),m=a.n(u),g=[{name:"Channel 1",component:"ChannelOne",path:"channel1"},{name:"Channel 2",component:"Messenger",path:"messenger"},{name:"Channel 3",component:"ChannelThree",path:"channel3"}],h=a(24),_=a.n(h),d=function(e){var t=e.name,a=e.path,n=e.homepage;return r.a.createElement(o.b,{to:n+a,onClick:function(){},className:"".concat(_.a.tabBarItem," \n      /* set the active styles for the tab if its path */\n      ").concat(window.location.pathname===n+a&&_.a.isCurrentTab)},t)},f=r.a.createContext(),p=a(27),C=a.n(p),E=function(e){var t=e.color;return r.a.createElement(f.Consumer,null,(function(e){var a=e.setCurrentView;return r.a.createElement("button",{className:"".concat(C.a.toggleSideBar," ").concat("black"===t&&C.a.black),onClick:function(){return a("sideBar")}},"\u2630")}))},b=a(34),w=a.n(b),v=function(e){var t=e.setCurrentTab,a=e.currentTab,n=e.homepage;return r.a.createElement("header",{className:w.a.tabBar},r.a.createElement("nav",null,g.map((function(e){return r.a.createElement(d,Object.assign({key:e.name},e,{setCurrentTab:t,currentTab:a,homepage:n}))}))),r.a.createElement(E,null))},I=a(35),O=a.n(I),B=a(18);a(50),a(59);B.initializeApp({apiKey:"AIzaSyB6xS5yf1JofwEnHY6ApmUwALoi49MeIdw",authDomain:"dummymessenger-5fe99.firebaseapp.com",databaseURL:"https://dummymessenger-5fe99.firebaseio.com",projectId:"dummymessenger-5fe99",storageBucket:"dummymessenger-5fe99.appspot.com",messagingSenderId:"915877512487",appId:"1:915877512487:web:2460762b4b1ca8ebb79502",measurementId:"G-1J2D8H4CJ6"});var S=B.firestore();B.analytics();var M=a(21),N=a.n(M),j=function(e){var t=e.contact,a=e.currentChat,c=e.setCurrentChat,s=e.setCurrentMessengerView,o=e.setIsFetchingChatData,l=Object(n.useState)(null),u=Object(i.a)(l,2),m=u[0],g=u[1];return Object(n.useEffect)((function(){S.collection("chats").doc(t.userId).collection("messages").doc("lastMessage").get().then((function(e){var t="";Object.keys(e.data()).length>0&&(t=e.data().content).length>20&&(t=t.substring(0,20)+"..."),g(t)}),[])})),r.a.createElement("div",{className:"".concat(N.a.chatItem," ").concat(a&&t.userId===a.userId&&N.a.isActive),onClick:function(){o(!0),function(e,t,a){S.collection("chats").doc(e).collection("messages").get().then((function(n){var r=[];n.forEach((function(e){"lastMessage"!==e.id&&r.push(e.data())})),r.sort((function(e,t){return e.submissionTime-t.submissionTime})),t({chatId:e,contact:a,messages:r})})).catch((function(e){return console.log(e)}))}(t.userId,c,t),s("chatScreen")}},r.a.createElement("img",{src:t.profilePic,alt:t.name}),r.a.createElement("div",{className:N.a.text},r.a.createElement("h4",null,t.name),r.a.createElement("p",null,m)))},V=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,margin:"auto"},src:"./assets/gifs/loading.svg",alt:"loading"}))},y=a(15),k=a.n(y),x=function(e){var t=e.contactsList,a=e.currentChat,c=e.setCurrentChat,s=e.currentMessengerView,o=e.setCurrentMessengerView,l=e.setIsFetchingChatData,u=Object(n.useState)(""),m=Object(i.a)(u,2),g=m[0],h=m[1];return r.a.createElement("div",{className:"".concat(k.a.chatList," ").concat("chatList"===s?k.a.isCurrentMessengerView:k.a.isNotCurrentMessengerView)},r.a.createElement("div",{className:k.a.searchInput},r.a.createElement("input",{type:"text",placeholder:"Search ...",value:g,onChange:function(e){return h(e.target.value)}}),r.a.createElement("img",{src:"./assets/icons/magnifying-glass.svg",alt:"search here"})),r.a.createElement("div",{className:k.a.chatItemContainer},t?function(e,t,a,n,c){return e.map((function(e){return r.a.createElement(j,{key:e.name,contact:e,setCurrentChat:t,currentChat:a,setCurrentMessengerView:n,setIsFetchingChatData:c})}))}(function(e,t){return e.filter((function(e){return e.name.includes(t)}))}(t,g),c,a,o,l):r.a.createElement(V,null)))},P=a(40),L=a(37),A=a(19),T=a.n(A),D=a(4),F=a.n(D),Y=function(e){var t=e.author,a=e.chat,n=e.deleteMessage,c=e.currentChat,s=e.setCurrentChat;return r.a.createElement("div",{className:"".concat(F.a.container,"\n    ").concat("Alex"===t.name?F.a.right:F.a.left,"\n    ")},"Alex"===t.name?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:F.a.profilePicture,src:t.profilePicture,alt:"".concat(t.name," ").concat(t.lastName)}),r.a.createElement("div",{className:"".concat(F.a.message," ").concat(F.a["message--user"])},a.content,r.a.createElement("button",{className:"".concat(F.a.deleteButton," ").concat(F.a["deleteButton--right"]),onClick:function(e){return n(c.chatId,a.messageId,s,c,e)}},r.a.createElement("i",{className:"icon ion-md-trash"})),r.a.createElement("span",{className:F.a["time--user"]},T()(a.submissionTime).format("YYYY/M/D - HH : mm")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:F.a.profilePicture,src:c.contact.profilePic,alt:c.contact.name}),r.a.createElement("div",{className:"".concat(F.a.message," ").concat(F.a["message--friend"])},a.content,r.a.createElement("button",{className:F.a.deleteButton,onClick:function(e){return n(c.chatId,a.messageId,s,c,e)}},r.a.createElement("i",{className:"icon ion-md-trash"})),r.a.createElement("span",{className:F.a["time--friend"]},T()(a.submissionTime).format("YYYY/M/D - HH : mm")))))},H=a(38),z=a.n(H),J={lastName:"Hunter",name:"Alex",number:"09123456789",profilePicture:"https://i.pinimg.com/236x/da/bd/70/dabd7011f523c7676c0770eeeff43df4.jpg"},R=a(7),U=a.n(R);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(L.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e,t,a,n,r){S.collection("chats").doc(e).collection("messages").doc(t).delete().then((function(){var e=n.messages.filter((function(e){return e.messageId!==t}));a(G({},n,{messages:e}))})).catch((function(e){return console.log(e)}))},q=function(e,t,a,n,r){var c=z()(),s={author:"user"===r?0:a.chatId,content:e,messageId:c,submissionTime:T()().valueOf()};S.collection("chats").doc(a.chatId).collection("messages").doc(c).set(s).then((function(){!function(e,t,a,n){S.collection("chats").doc(t.chatId).collection("messages").doc("lastMessage").set(e).then((function(){a(G({},t,{messages:[].concat(Object(P.a)(t.messages),[e])}))})).catch((function(e){return console.log(e)}))}(s,a,n)})).catch((function(e){return console.log(e)}))},X=function(e){var t=e.currentChat,a=e.setCurrentChat,c=(e.contactsList,e.setContactsList,e.currentMessengerView),s=e.setCurrentMessengerView,o=e.isFetchingChatData,l=Object(n.useState)(""),u=Object(i.a)(l,2),m=u[0],g=u[1],h=Object(n.useState)("user"),_=Object(i.a)(h,2),d=_[0],p=_[1];return Object(n.useEffect)((function(){g(""),t&&function(e){var t={};e.messages.length>0&&(t=e.messages.slice(-1)[0]),S.collection("chats").doc(e.chatId).collection("messages").doc("lastMessage").set(t).then((function(){console.log("the last message was updated successfully")})).catch((function(e){return console.log(e)}))}(t)}),[t]),r.a.createElement(f.Consumer,null,(function(e){return r.a.createElement("div",{className:"".concat(U.a.chatScreen,"\n        \n       ").concat("chatScreen"===c?U.a.isCurrentMessengerView:U.a.isNotCurrentMessengerView,"\n         \n          ")},o?r.a.createElement(V,null):t?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:U.a.close,onClick:function(){a(null),s("chatList")}},r.a.createElement("i",{className:"icon ion-md-close"})),r.a.createElement("div",{className:U.a.messageScreen},r.a.createElement("div",{className:U.a.messageContainer},t.messages.map((function(e){return 0===e.author?r.a.createElement(Y,{key:e.messageId,author:J,chat:e,deleteMessage:Q,currentChat:t,setCurrentChat:a}):r.a.createElement(Y,{key:e.messageId,author:t.contact,chat:e,deleteMessage:Q,currentChat:t,setCurrentChat:a})})))),r.a.createElement("div",{className:U.a.typingArea},r.a.createElement("textarea",{placeholder:"write a message ...",onChange:function(e){return g(e.target.value)},value:m}),m&&r.a.createElement("button",{onClick:function(){q(m,0,t,a,d)}},r.a.createElement("i",{className:"icon ion-md-send"})),r.a.createElement("span",{className:"".concat(U.a.currentAuthor," ").concat("friend"===d&&U.a.friend),onClick:function(){p((function(e){return"user"===e?"friend":"user"}))}},"Send as : ",d))):r.a.createElement("div",{className:U.a.welcomeMessage},"welcome , please select a chat to start"))}))},Z=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),u=l[0],m=l[1],g=Object(n.useState)(null),h=Object(i.a)(g,2),_=h[0],d=h[1],f=Object(n.useState)("chatList"),p=Object(i.a)(f,2),C=p[0],E=p[1];return Object(n.useEffect)((function(){u&&Object.keys(u).length>0&&s(!1)}),[u]),Object(n.useEffect)((function(){S.collection("users").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),d(t)})).catch((function(e){console.log("Error getting document:",e)}))}),[]),r.a.createElement("div",{className:O.a.messenger},r.a.createElement(x,{contactsList:_,currentChat:u,setCurrentChat:m,currentMessengerView:C,setCurrentMessengerView:E,setIsFetchingChatData:s}),r.a.createElement(X,{currentChat:u,contactsList:_,setCurrentChat:m,setContactsList:d,currentMessengerView:C,setCurrentMessengerView:E,isFetchingChatData:c}))},K=function(){return r.a.createElement("div",{className:"center"},"Welcome",r.a.createElement("br",null),"Please select a part to start")},$=function(){return r.a.createElement("div",{className:"center"},"this is the channelOne")},ee=function(){return r.a.createElement("div",{className:"center"},"this is the ChannelThree")},te=function(e){return r.a.createElement(f.Consumer,null,(function(e){var t=e.currentView,a=(e.setCurrentView,e.homepage);return r.a.createElement("main",{className:"".concat(m.a.dashboard," ").concat("Home"===t?m.a.isCurrentView:m.a.isNotCurrentView)},r.a.createElement(v,{homepage:a}),r.a.createElement(l.a,{path:a,exact:!0,component:K}),r.a.createElement(l.a,{path:a+"messenger",exact:!0,component:Z}),r.a.createElement(l.a,{path:a+"channel1",exact:!0,component:$}),r.a.createElement(l.a,{path:a+"channel3",exact:!0,component:ee}))}))},ae=function(){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse",alignItems:"center",justifyContent:"center",width:"100%"}},r.a.createElement(E,{color:"black"}),"settings goes here")},ne=a(39),re=a.n(ne),ce=function(){return r.a.createElement("figure",{className:re.a.avatar},r.a.createElement("img",{src:J.profilePicture,alt:"Profile"}),r.a.createElement("figcaption",null,J.name))},se=a(10),ie=a.n(se),oe=function(e){var t=e.icon,a=e.path,n=e.name,c=e.isOpen,s=e.currentPage,i=e.setCurrentPage,l=e.setCurrentView;return r.a.createElement(o.b,{to:a,onClick:function(){i(n),l(n)},className:"".concat(ie.a.sideBarItem," ").concat(s===n&&(c?ie.a.isCurrentPage__opened:ie.a.isCurrentPage__closed),"\n        ").concat(c&&ie.a.isOpen,"\n        ")},c&&n,r.a.createElement("span",{className:"".concat(ie.a.icon,"\n        ").concat(c?ie.a.icon__opened:ie.a.icon__closed),style:{background:" url(./assets/icons/".concat(t).concat(s===n&&c?"-violet":"",".svg)")}}))},le=a(16),ue=a.n(le),me=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),o=Object(i.a)(s,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){switch(window.location.pathname){case"/settings":u("Settings");break;case"/calls":u("Calls");break;default:u("Home")}}),[]),r.a.createElement(f.Consumer,null,(function(e){var t=e.currentView,n=e.setCurrentView,s=e.homepage;return r.a.createElement("aside",{className:"".concat(ue.a.sideBar," ").concat(a&&ue.a.isOpen," ").concat("sideBar"===t?ue.a.isCurrentView:ue.a.isNotCurrentView)},r.a.createElement("button",{className:ue.a.toggleButton,onClick:function(){return c(!a)}},a?r.a.createElement(r.a.Fragment,null,"\xd7"):r.a.createElement(r.a.Fragment,null,"\u2630")),r.a.createElement(ce,null),r.a.createElement(oe,{path:s,icon:"house",name:"Home",isOpen:a,currentPage:l,setCurrentPage:u,setCurrentView:n}),r.a.createElement(oe,{path:s+"settings",icon:"settings",name:"Settings",isOpen:a,currentPage:l,setCurrentPage:u,setCurrentView:n}),r.a.createElement(oe,{path:s+"calls",icon:"phone-call",name:"Calls",isOpen:a,currentPage:l,setCurrentPage:u,setCurrentView:n}))}))},ge=function(){return r.a.createElement("div",{style:{display:"flex",flexDirection:"column-reverse",alignItems:"center",justifyContent:"center",width:"100%"}},r.a.createElement(E,{color:"black"})," CallScreen goes here")},he=(a(57),function(e){switch(window.location.pathname){case e+"settings":return"settings";case e+"calls":return"calls";default:return"Home"}});var _e=function(){var e="/dummyMessenger/",t=Object(n.useState)(he(e)),a=Object(i.a)(t,2),c=a[0],s=a[1];return r.a.createElement(f.Provider,{value:{currentView:c,setCurrentView:s,homepage:e}},r.a.createElement(o.a,null,r.a.createElement(me,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:e,exact:!0,component:te}),r.a.createElement(l.a,{path:e+"channel1",exact:!0,component:te}),r.a.createElement(l.a,{path:e+"messenger",exact:!0,component:te}),r.a.createElement(l.a,{path:e+"channel3",exact:!0,component:te}),r.a.createElement(l.a,{path:e+"settings",exact:!0,component:ae}),r.a.createElement(l.a,{path:e+"calls",exact:!0,component:ge}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,a){e.exports={typingArea:"ChatScreen_typingArea__3btVq",currentAuthor:"ChatScreen_currentAuthor__1tpBX",chatScreen:"ChatScreen_chatScreen__19WYi",welcomeMessage:"ChatScreen_welcomeMessage__2gWNh",messageScreen:"ChatScreen_messageScreen__1Yy7r",messageContainer:"ChatScreen_messageContainer__2D5Wm",close:"ChatScreen_close__VBO2r",isCurrentMessengerView:"ChatScreen_isCurrentMessengerView__1JQmj",isNotCurrentMessengerView:"ChatScreen_isNotCurrentMessengerView__kQieG",friend:"ChatScreen_friend__3CELQ"}}},[[41,1,2]]]);
//# sourceMappingURL=main.f156b905.chunk.js.map